var furver=function(t){"use strict";function e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function r(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?e(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},c=Object.keys(t);for(n=0;n<c.length;n++)r=c[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(n=0;n<c.length;n++)r=c[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function c(){let t=[];return{promise(){const e=function(){let t,e;const r=new Promise(((r,n)=>{t=r,e=n}));return r.resolve=t,r.reject=e,r}();return t.push(e),e},resolve:e=>(t.forEach((t=>t.resolve(e))),t=[],e),reject:e=>(t.forEach((t=>t.reject(e))),t=[],e)}}function a(t){const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{resolve:r,reject:n,promise:o}=c();let a;async function i(){for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return i.calls.push(c),a&&clearTimeout(a),a=setTimeout((()=>{r(t(i.calls)),i.calls=[]}),e),o()}return i.calls=[],i.reject=n,i}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);return async function(){const t=e.calls.length;return(await e(...arguments))[t]}}class i extends Error{}class s extends i{}const u=["body"],l=Symbol("schema"),f=t=>a((e=>{const[[n,o]]=e,c=JSON.stringify(["array",...e.map((t=>{let[,{body:e}]=t;return e}))]);return t(n,r(r({},o),{},{body:c}))})),y=f((async(t,e)=>{const n=await fetch(t,r(r({},e),{},{method:"post"}));if(!n.ok)throw n;return await n.json()})),b=f((async(t,e)=>{const r=e||{},{body:n}=r,c=o(r,u),a=new URLSearchParams({body:n}).toString(),i="".concat(t,"?").concat(a),s=await fetch(i,c);if(!s.ok)throw s;return await s.json()}));h.schema=async function(t){const e=await fetch(t);return await e.json()};const p=t=>(t=>"function"==typeof t)(t)?t:()=>t;async function h(t){let{endpoint:e="http://localhost:3000",fetch:r=y,schema:n=h.schema}=t;const o={};return n&&(t=>{if(o[l]=t,!Array.isArray(t))throw new s("Not a valid schema");t.reduce(((t,n)=>{let[o]=n;return t[o]=function(){for(var t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return r(e,{body:[o,...n]})},t[o].toJSON=()=>o,t}),o)})(await p(n)("/"===e?"/schema":"".concat(e,"/schema"))),o.call=t=>r(e,{body:t}),o}return t.bulk=f,t.client=h,t.default=h,t.get=b,t.post=y,t.schema=function(t){return t[l]},Object.defineProperty(t,"__esModule",{value:!0}),t}({});
